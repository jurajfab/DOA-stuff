--- Lab: RAMBO on one service --- 

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: rambo
    country: de
    env: test
  name: rambo-mu
spec:
  replicas: 2
  selector:
    matchLabels:
      app: rambo
  template:
    metadata:
      labels:
        app: rambo
    spec:
      containers:
      - image: bletvaska/rambo:1
        name: rambo

---

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: rambo
    country: sk
    env: prod 
    region: east 
  name: rambo-ke
spec:
  replicas: 3
  selector:
    matchLabels:
      app: rambo
  template:
    metadata:
      labels:
        app: rambo
    spec:
      containers:
      - image: bletvaska/rambo:1
        name: rambo

---

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: rambo
    country: sk
    env: prod 
    region: east 
  name: rambo-po
spec:
  replicas: 2
  selector:
    matchLabels:
      app: rambo
  template:
    metadata:
      labels:
        app: rambo
    spec:
      containers:
      - image: bletvaska/rambo:1
        name: rambo

---

apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: rambo
    country: sk
    env: prod 
    region: west 
  name: rambo-ba
spec:
  replicas: 4
  selector:
    matchLabels:
      app: rambo
  template:
    metadata:
      labels:
        app: rambo
    spec:
      containers:
      - image: bletvaska/rambo:1
        name: rambo

---

apiVersion: v1
kind: Service
metadata:
  labels:
    app: rambo
  name: rambo
  # namespace: application
spec:
  ports:
  - name: www
    port: 8080
    protocol: TCP
    targetPort: 8000
  selector:
    app: rambo
  type: LoadBalancer

##############################################

--- Lab: Selektívne aktualizácie --- 
Na základe infraštruktúry, ktorú ste vyrobili v predchádzajúcom labáku, aktualizujte jednotlivé nasadenia takto:
v Košiciach pustite Rambo 2
v Prešove pustit Rambo 3
v Bratislave pustit Rambo 4

SOLUTION: 
kubectl set image deployments rambo-po rambo=bletvaska/rambo:3
kubectl set image deployments rambo-ke rambo=bletvaska/rambo:2
kubectl set image deployments rambo-ba rambo=bletvaska/rambo:4